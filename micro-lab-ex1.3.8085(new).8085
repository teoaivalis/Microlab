LXI B,01F4H                        ; йахустеягсг циа том б = 500ms
MVI D,01H                          ; бафы стом D то 1 циа тгм аявийг хесг
MOV A,D                            
CMA                                ; йамы тгм амтистяожг
OUT 30H                            ; елжамифы то апотекесла
CMA                                ; йамы паки тгм амтистяожг
CALL DELB                          ; ежаялофы тгм йахустеягсг(500ms)
CALL DELB                          ; ежаялофы паки йахустеягсг(1000ms)

MOVE_LEFT:

IN 20H                             ; диабафы тгм еисодо
ANI 80H                            ; аполомымы то MSB
JZ MOVE_LEFT                       ; ам еимаи лгдем йоккаеи то бацомето 
                                   ; йаи пеяилемы левяи ма цимеи 1

IN 20H                             ; диабафы паки тгм еисодо
ANI 01H                            ; аполомымы то LSB 
JZ RIGHT_INVERSE                   ; ам еимаи лгдем йамы амтистяожг (дениа)

MOV A,D                            ; бафы том D  стом йатавыягтг а
RLC                                ; йамы аяистеяг окисхгсг ысте ма амаьеи 
                                   ; то алесыс аяистеяа калпайи
CMA                                ; йамы амтистяожг
OUT 30H                            ; ейтупымы тгм енодо
CMA                                ; амтистяежы паки 
CALL DELB                          ; ежаялофы тгм йахустеягсг
MOV D,A                            ; епистяежы сто D то мео пеяиеволемо тоу а
CPI 80H                            ; екецвы ам евеи жтасеи сто MSB
JNZ MOVE_LEFT                      ; AN ови паеи йаи циа аккг аяистеяг окисхгсг
                                   ; аккиыс паеи циа дениа окисхгсг
CALL DELB

MOVE_RIGHT:

IN 20H                             ; диабафы тгм еисодо
ANI 80H                            ; аполомымы то MSB
JZ MOVE_RIGHT                      ; ам еимаи лгдем йоккаеи то бацомето 

IN 20H                             ; диабафы паки тгм еисодо
ANI 01H                            ; аполомымы то LSB
JZ LEFT_INVERSE                    ; ам еимаи лгдем йамы амтистяожг (аяистеяг)

MOV A,D                            ; бафы том D  стом йатавыягтг а
RRC                                ; йамы дениа окисхгсг ысте ма амаьеи 
                                   ; то алесыс дениа калпайи
CMA                                ; йамы амтистяожг
OUT 30H                            ; ейтупымы тгм енодо
CMA                                ; амтистяежы паки 
CALL DELB                          ; ежаялофы тгм йахустеягсг
MOV D,A                            ; епистяежы сто D то мео пеяиеволемо тоу а
CPI 01H                            ; екецвы ам евеи жтасеи сто LSB
JNZ MOVE_RIGHT                     ; AN ови паеи йаи циа аккг дениа окисхгсг
CALL DELB
JMP MOVE_LEFT                      ; аккиыс паеи циа аяистеяг окисхгсг




RIGHT_INVERSE:

IN 20H                             ; диабафы тгм еисодо
ANI 80H                            ; аполомымы то MSB
JZ RIGHT_INVERSE                   ; ам еимаи лгдем йоккаеи то бацомето 

IN 20H                             ; диабафы паки тгм еисодо
ANI 01H                            ; аполомымы то LSB
JZ RIGHT_INVERSE                   ; ам еимаи лгдем пеяилемы ма цимеи 1        
JMP MOVE_RIGHT                     ; локис цимеи йимоулаи дениа

LEFT_INVERSE:

IN 20H                             ; диабафы тгм еисодо
ANI 80H                            ; аполомымы то MSB
JZ LEFT_INVERSE                    ; ам еимаи лгдем йоккаеи то бацомето 

IN 20H                             ; диабафы паки тгм еисодо
ANI 01H                            ; аполомымы то LSB
JZ LEFT_INVERSE                    ; ам еимаи лгдем пеяилемы ма цимеи 1
JMP MOVE_LEFT                      ; ли=окис цимеи йимоулаи аяистеяа

END